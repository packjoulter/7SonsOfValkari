<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="styles.css" />
  <title>Jack's D&D Tools</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
</head>
<body>
  <h1>Welcome to the 7 Sons of Valkari!</h1>
  <p>The home for Dungeons & Dragons ideas and Jacks programming projects.</p>

  <a href="#tools" class="button">Explore Tools</a>
  <section id="tools" style="margin-top: 60px; text-align: left; max-width: 600px; margin-left: auto; margin-right: auto;">
  <h2 style="color: #f39c12; text-shadow: 1px 1px 3px #000;">My D&D Tools</h2>
  <ul style="color: #ddd; font-size: 1.1em; line-height: 1.6;">
    <li><strong>Loot Table:</strong> Quickly random loot for you campaigns. </li>

    <section id="loot-generator" style="max-width: 600px; margin: 40px auto; text-align: left;">
  <h2>Random Loot Generator</h2>
  
  <label for="table-select">Select Loot Table:</label>
  <select id="table-select">
    <option value="">Choose a table</option>
    <option value="arcana">Arcana</option>
    <option value="armaments">Armaments</option>
    <option value="implements">Implements</option>
    <option value="relics">Relics</option>
  </select>

  <br /><br />

  <label for="rarity-select">Select Rarity:</label>
  <select id="rarity-select">
    <option value="">Choose rarity</option>
    <option value="Common">Common</option>
    <option value="Uncommon">Uncommon</option>
    <option value="Rare">Rare</option>
    <option value="Very Rare">Very Rare</option>
    <option value="Legendary">Legendary</option>
  </select>

  <br /><br />

  <label for="roll-input">Enter Roll (1-100):</label>
<input type="number" id="roll-input" min="1" max="100" />


  <br /><br />

  <button id="get-loot-btn">Get Loot</button>

  <p id="loot-result" style="font-weight: bold; color: #f39c12; margin-top: 20px;"></p>
</section>

    <li><strong>NPC Generator:</strong> Create unique characters with traits and backgrounds.</li>

    <section id="npc-generator" style="max-width: 600px; margin: 40px auto; text-align: left;">
  <h2>Random NPC Generator</h2>
  
  <button id="generate-npc-btn">Generate NPC</button>

  <div id="npc-result" style="margin-top: 20px; padding: 10px; background-color: #2c2c3a; border-radius: 8px; box-shadow: 2px 2px 6px #00000088; color: #f0e6d2;"></div>
</section>

 
  </ul>
</section>


  <footer>
    &copy; 2025 Jack Poulter
  </footer>

  <script> // Random Loot Generator Script
  async function loadLootTable(tableName) {
    if (!tableName) return null;
    try {
      const response = await fetch(`${tableName}_loot.json`);
      if (!response.ok) throw new Error("Failed to load loot table.");
      const data = await response.json();
      return data;
    } catch (error) {
      alert(error.message);
      return null;
    }
  }

  function filterByRarity(data, rarity) {
    return data.filter(entry => entry.rarity.toLowerCase() === rarity.toLowerCase());
  }

  function lookupLoot(data, roll) {
    for (const entry of data) {
      const [start, end] = entry.range;
      if (roll >= start && roll <= end) {
        return entry;
      }
    }
    return null;
  }

  document.getElementById("get-loot-btn").addEventListener("click", async () => {
    const tableName = document.getElementById("table-select").value;
    const rarity = document.getElementById("rarity-select").value;
    const roll = parseInt(document.getElementById("roll-input").value, 10);

    const resultEl = document.getElementById("loot-result");
    resultEl.textContent = "";

    if (!tableName) {
      alert("Please select a loot table.");
      return;
    }
    if (!rarity) {
      alert("Please select a rarity.");
      return;
    }
    if (isNaN(roll) || roll < 1 || roll > 100) {
      alert("Please enter a roll between 1 and 100.");
      return;
    }

    const tableData = await loadLootTable(tableName);
    if (!tableData) return;

    const filtered = filterByRarity(tableData, rarity);
    if (filtered.length === 0) {
      resultEl.textContent = `No items found for rarity '${rarity}'.`;
      return;
    }

    const loot = lookupLoot(filtered, roll);
    if (loot) {
      resultEl.textContent = `You found: ${loot.item} (Rarity: ${loot.rarity})`;
    } else {
      resultEl.textContent = "No item found for this roll and rarity.";
    }
  });
</script> 

<script> // Random NPC Generator Script
  const npcData = {
    firstNames: ["Aric", "Bryn", "Caelen", "Dara", "Eryn", "Faelar", "Gorin", "Hale", "Isolde", "Jarek"],
    lastNames: ["Stormborn", "Nightshade", "Ironfist", "Swiftfoot", "Duskwalker", "Brightstar", "Shadowalker", "Oakenshield", "Flameheart", "Silverhand"],
    races: ["🧙‍♂️ Human", "🌿 Elf", "⛏️ Dwarf", "👣 Halfling", "😈 Tiefling", "🐲 Dragonborn", "💪 Half-Orc", "🧠 Gnome"],
    classes: ["⚔️ Fighter", "🪄 Wizard", "🗡️ Rogue", "⛪ Cleric", "🏹 Ranger", "🎻 Bard", "🛡️ Paladin", "🔥 Warlock"],
    traits: ["has a pet raven", "is always humming", "collects shiny rocks", "speaks in rhymes", "is missing a finger", "has a mysterious tattoo", "is afraid of magic", "wears mismatched boots"]
  };

  function getRandomFrom(array) {
    return array[Math.floor(Math.random() * array.length)];
  }

  document.getElementById("generate-npc-btn").addEventListener("click", () => {
    const firstName = getRandomFrom(npcData.firstNames);
    const lastName = getRandomFrom(npcData.lastNames);
    const race = getRandomFrom(npcData.races);
    const npcClass = getRandomFrom(npcData.classes);
    const trait = getRandomFrom(npcData.traits);

    const npcResultText = `
      <strong>Name:</strong> ${firstName} ${lastName}<br/>
      <strong>Race:</strong> ${race}<br/>
      <strong>Class:</strong> ${npcClass}<br/>
      <strong>Trait:</strong> ${trait}
    `;

    const resultEl = document.getElementById("npc-result");
    resultEl.innerHTML = npcResultText;

    // Fade in animation
    resultEl.style.opacity = 0;
    setTimeout(() => {
      resultEl.style.opacity = 1;
    }, 50);
  });

  // Copy to clipboard
  document.getElementById("copy-npc-btn").addEventListener("click", () => {
    const text = document.getElementById("npc-result").innerText;
    if (!text.trim()) {
      alert("Generate an NPC first!");
      return;
    }
    navigator.clipboard.writeText(text)
      .then(() => alert("NPC copied to clipboard!"))
      .catch(() => alert("Failed to copy."));
  });
</script>



</body>
</html>
