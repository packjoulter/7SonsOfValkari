<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>D&D Tools - 7 Sons of Valkari</title>
  <meta name="description" content="Dungeons & Dragons tools for DMs and players - NPC generator, loot tables, and more.">
  <link rel="stylesheet" href="/styles/styles.css">
</head>

<body>
  <!-- Skip to main content link for accessibility -->
  <a href="#main-content" class="visually-hidden">Skip to main content</a>

  <!-- Navigation Bar -->
  <nav id="main-nav" role="navigation" aria-label="Main navigation">
    <div class="nav-container">
      <div class="nav-left">
        <a href="/" class="logo" aria-label="7 Sons of Valkari home page">7 Sons of Valkari - Tools</a>
      </div>
      <div class="nav-right">
        <div class="dropdown">
          <button class="dropbtn" aria-expanded="false" aria-haspopup="true" aria-label="Main menu">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </button>
          <div class="dropdown-content" role="menu">
            <a href="/tools/index.html" role="menuitem">Tools</a>
            <a href="/characters/index.html" role="menuitem">Characters</a>
            <a href="/about.html" role="menuitem">About</a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Header -->
  <header id="site-header">
    <img src="/assets/Yggdrasil.webp" alt="Yggdrasil, the World Tree from Norse mythology">
    <div class="header-overlay">
      <div class="header-text">
        <h1>D&D Tools</h1>
        <p>Powerful tools to enhance your Dungeons & Dragons experience.</p>
        <p>Generate NPCs, roll for loot, and more!</p>
      </div>
    </div>
  </header>

  <main id="main-content">
    <a href="/" class="back-home-button">← Back to Home</a>

    <!-- NPC Generator Section -->
    <section class="tool-section" id="npc-generator-section">
      <h2>Random NPC Generator</h2>
      <p>Create unique characters with interesting traits and backgrounds for your campaign.</p>
      
      <div class="btn-group">
        <button id="generate-npc-btn" class="btn" type="button">Generate NPC</button>
        <button id="copy-npc-btn" class="btn" type="button">Copy to Clipboard</button>
      </div>

      <div id="npc-result" class="result-display" role="region" aria-live="polite" aria-label="Generated NPC">
        <em>Click "Generate NPC" to create a random character</em>
      </div>

      <div id="npc-loading" class="loading-indicator" hidden aria-hidden="true">
        <span class="spinner"></span>
        <span>Generating NPC...</span>
      </div>
    </section>

    <!-- Loot Table Generator Section -->
    <section class="tool-section" id="loot-generator-section">
      <h2>Random Loot Generator</h2>
      <p>Generate treasure from various loot tables based on rarity and dice rolls.</p>

      <form id="loot-form" class="tool-form">
        <div class="form-group">
          <label for="table-select">Select Loot Table:</label>
          <select id="table-select" required aria-describedby="table-help">
            <option value="">Choose a table</option>
            <option value="arcana">Arcane Items</option>
            <option value="armaments">Weapons & Armor</option>
            <option value="implements">Tools & Implements</option>
            <option value="relics">Ancient Relics</option>
          </select>
          <small id="table-help" class="form-help">Different tables contain themed magical items</small>
        </div>

        <div class="form-group">
          <label for="rarity-select">Select Rarity:</label>
          <select id="rarity-select" required aria-describedby="rarity-help">
            <option value="">Choose rarity</option>
            <option value="Common">Common</option>
            <option value="Uncommon">Uncommon</option>
            <option value="Rare">Rare</option>
            <option value="Very Rare">Very Rare</option>
            <option value="Legendary">Legendary</option>
          </select>
          <small id="rarity-help" class="form-help">Higher rarity items are more powerful but rarer</small>
        </div>

        <div class="form-group">
          <label for="roll-input">Enter Roll (1-100):</label>
          <input type="number" id="roll-input" min="1" max="100" required aria-describedby="roll-help">
          <small id="roll-help" class="form-help">Roll a d100 or enter any number between 1-100</small>
        </div>

        <button type="submit" id="get-loot-btn" class="btn">Get Loot</button>
      </form>

      <div id="loot-result" class="result-display" role="region" aria-live="polite" aria-label="Loot result">
        <em>Fill out the form above and click "Get Loot" to generate treasure</em>
      </div>

      <div id="loot-loading" class="loading-indicator" hidden aria-hidden="true">
        <span class="spinner"></span>
        <span>Rolling for loot...</span>
      </div>
    </section>

    <!-- Fantasy Tensions Generator Section -->
    <section class="tool-section" id="fantasy-tensions-section">
      <h2>Fantasy Race Relations Generator</h2>
      <p>Generate interesting tensions and conflicts between different fantasy races for your campaign.</p>
      
      <div class="form-group">
        <label for="race-select">Choose a race:</label>
        <select id="race-select" aria-describedby="race-help">
          <option value="">Select a fantasy race</option>
        </select>
        <small id="race-help" class="form-help">Different races have unique cultural tensions and conflicts</small>
      </div>

      <button id="generate-tension" class="btn" type="button">Generate Tension</button>
      
      <div id="tension-result" class="result-display" role="region" aria-live="polite" aria-label="Race tension result">
        <em>Select a race and click "Generate Tension" to create story hooks</em>
      </div>

      <div id="tension-loading" class="loading-indicator" hidden aria-hidden="true">
        <span class="spinner"></span>
        <span>Generating tensions...</span>
      </div>
    </section>

    <!-- Dice Roller Section -->
    <section class="tool-section" id="dice-roller-section">
      <h2>Advanced Dice Roller</h2>
      <p>Roll any combination of dice with modifiers and advantage/disadvantage.</p>
      
      <form id="dice-form" class="tool-form">
        <div class="form-group">
          <label for="dice-input">Dice Expression:</label>
          <input type="text" id="dice-input" placeholder="1d20+5, 3d6, 2d8-1" aria-describedby="dice-help">
          <small id="dice-help" class="form-help">Examples: 1d20+5, 3d6, 2d8-1, 4d6kh3 (keep highest 3)</small>
        </div>

        <div class="form-group">
          <fieldset>
            <legend>Roll Type:</legend>
            <div class="radio-group">
              <label>
                <input type="radio" name="advantage" value="normal" checked>
                Normal Roll
              </label>
              <label>
                <input type="radio" name="advantage" value="advantage">
                Advantage (roll twice, take higher)
              </label>
              <label>
                <input type="radio" name="advantage" value="disadvantage">
                Disadvantage (roll twice, take lower)
              </label>
            </div>
          </fieldset>
        </div>

        <button type="submit" class="btn">Roll Dice</button>
      </form>

      <div id="dice-result" class="result-display" role="region" aria-live="polite" aria-label="Dice roll result">
        <em>Enter a dice expression and click "Roll Dice"</em>
      </div>

      <div id="dice-history" class="dice-history">
        <h3>Recent Rolls:</h3>
        <ul id="dice-history-list" class="history-list">
          <li><em>No rolls yet</em></li>
        </ul>
        <button id="clear-history" class="btn btn--secondary" type="button">Clear History</button>
      </div>
    </section>

    <a href="/" class="back-home-button">← Back to Home</a>
  </main>

  <!-- Error Toast Container -->
  <div id="toast-container" class="toast-container" aria-live="polite"></div>

  <!-- JavaScript Modules -->
  <script type="module" src="/js/tools.js"></script>
</body>
</html>