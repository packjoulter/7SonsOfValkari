<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>7 Sons of Valkari - Tools</title>
  <link rel="stylesheet" href="/styles/styles.css">
</head>

<body> <!-- START OF BODY -->
<nav id="main-nav"><!-- Navigation Bar -->
  <div class="nav-container">
    <div class="nav-left">
      <a href="/" class="logo">7 Sons of Valkari - Tools Page</a>
    </div>
    <div class="nav-right">
      <div class="dropdown">
        <button class="dropbtn">â˜°</button>
        <div class="dropdown-content">
          <a href="/tools/index.html">Tools</a>
          <a href="/characters.html">Characters</a>
          <a href="/about.html">About</a>
        </div>
      </div>
    </div>
  </div>
</nav>

<!-- Main Header -->
<header id="site-header">
  <img src="/assets/Yggdrasil.webp" alt="Yggdrasil">
  <div style="text-align: center;">
    <div class="header-text">
      <h1>Welcome to the Tools Page</h1>
      <p>Explore tools by scrolling.</p>
    </div>
  </div>
</header>

  <a href="/" class="back-home-button">Back to Home</a>

  <section id="npc-generator"> <!-- NPC Generator Section -->
    <h2>NPC Generator</h2>

    <li><strong>NPC Generator:</strong> Create unique characters with traits and backgrounds.</li> <!-- Header for NPC Generator --> 

  <section id="npc-generator" style="max-width: 600px; margin: 40px auto; text-align: center;"> <!-- NPC Generator Section  -->
      <h2>Random NPC Generator</h2>
    <div id="npc-buttons" style="display: flex; justify-content: center; gap: 10px; margin-top: 15px;">
      <button id="generate-npc-btn">Generate NPC</button>
      <button id="copy-npc-btn">Copy NPC</button>
  </div>
      <div id="npc-result" style="margin-top: 20px; padding: 10px; background-color: #2c2c3a; border-radius: 8px; box-shadow: 2px 2px 6px #00000088; color: #f0e6d2;"></div>
  </section>
  <script> // Random NPC Generator Script
  const npcData = {
  firstNames: [
    "Aric", "Bryn", "Caelen", "Dara", "Eryn", "Faelar", "Gorin", "Hale", "Isolde", "Jarek",
    "Lira", "Milo", "Nyssa", "Orin", "Pip", "Quinn", "Rian", "Syl", "Tess", "Vorn",
    "Wren", "Xan", "Yara", "Zed"
  ],
  lastNames: [
    "Stormborn", "Nightshade", "Ironfist", "Swiftfoot", "Duskwalker", "Brightstar",
    "Shadowalker", "Oakenshield", "Flameheart", "Silverhand",
    "Underbough", "Fizzlespark", "Strongjaw", "Hogsbottom", "Pebblepocket",
    "Mugmuncher", "Snoreblaster", "Picklefarmer", "Fumblefoot", "Butterbuns"
  ],
  races: [
    "ðŸ§™â€â™‚ï¸ Human", "ðŸŒ¿ Elf", "â›ï¸ Dwarf", "ðŸ‘£ Halfling", "ðŸ˜ˆ Tiefling",
    "ðŸ² Dragonborn", "ðŸ’ª Half-Orc", "ðŸ§  Gnome"
  ],
  classes: [
    "âš”ï¸ Fighter", "ðŸª„ Wizard", "ðŸ—¡ï¸ Rogue", "â›ª Cleric", "ðŸ¹ Ranger",
    "ðŸŽ» Bard", "ðŸ›¡ï¸ Paladin", "ðŸ”¥ Warlock", "ðŸ³ Chef", "ðŸŽª Jester"
  ],
  alignments: [
    "Lawful Good", "Neutral Good", "Chaotic Good",
    "Lawful Neutral", "True Neutral", "Chaotic Neutral",
    "Lawful Evil", "Neutral Evil", "Chaotic Evil"
  ],
  professions: [
    "blacksmith", "innkeeper", "merchant", "herbalist", "thief", 
    "monster hunter", "alchemist", "fisherman", "farmer",
    "rat catcher", "bard-for-hire", "fortune teller", "goblin negotiator",
    "beekeeper", "gravedigger", "local fool"
  ],
  traits: [
    "has a pet raven", "is always humming", "collects shiny rocks",
    "speaks in rhymes", "is missing a finger", "has a mysterious tattoo",
    "is afraid of magic", "wears mismatched boots",
    "insists they are a prince/princess", "laughs at their own jokes",
    "thinks they're invisible when they close their eyes",
    "is obsessed with cheese", "believes their hat is magical",
    "challenges everyone to arm wrestle", "only speaks in third person",
    "is convinced theyâ€™re cursed", "writes bad poetry about battle",
    "owns 12 cats (and talks about them constantly)", "has a chicken sidekick",
    "wears a fake mustache (poorly)"
  ]
};


  function getRandomFrom(array) {
    return array[Math.floor(Math.random() * array.length)];
  }

 document.getElementById("generate-npc-btn").addEventListener("click", () => {
  const firstName = getRandomFrom(npcData.firstNames);
  const lastName = getRandomFrom(npcData.lastNames);
  const race = getRandomFrom(npcData.races);
  const npcClass = getRandomFrom(npcData.classes);
  const alignment = getRandomFrom(npcData.alignments);
  const profession = getRandomFrom(npcData.professions);
  const trait = getRandomFrom(npcData.traits);

  const npcResultText = `
    <strong>Name:</strong> ${firstName} ${lastName}<br/>
    <strong>Race:</strong> ${race}<br/>
    <strong>Class:</strong> ${npcClass}<br/>
    <strong>Alignment:</strong> ${alignment}<br/>
    <strong>Profession:</strong> ${profession}<br/>
    <strong>Trait:</strong> ${trait}
  `;

  const resultEl = document.getElementById("npc-result");
  resultEl.innerHTML = npcResultText;

  // Fade in animation
  resultEl.style.opacity = 0;
  setTimeout(() => {
    resultEl.style.opacity = 1;
  }, 50);
});


  // Copy to clipboard
  document.getElementById("copy-npc-btn").addEventListener("click", () => {
    const text = document.getElementById("npc-result").innerText;
    if (!text.trim()) {
      alert("Generate an NPC first!");
      return;
    }
    navigator.clipboard.writeText(text)
      .then(() => alert("NPC copied to clipboard!"))
      .catch(() => alert("Failed to copy."));
  });
  </script>
  </section>

  <section id="loot-generator"> <!-- Loot Generator Section -->
    <h2>Loot Table Generator</h2>
  <li><strong>Loot Table:</strong> Quickly random loot for you campaigns. </li>

  <section id="loot-generator" style="max-width: 600px; margin: 40px auto; text-align: left;"> <!-- Loot Generator Section --> 
    <h2>Random Loot Generator</h2>
    
    <label for="table-select">Select Loot Table:</label>
    <select id="table-select">
      <option value="">Choose a table</option>
      <option value="arcana">Arcana</option>
      <option value="armaments">Armaments</option>
      <option value="implements">Implements</option>
      <option value="relics">Relics</option>
    </select>

    <br /><br />

    <label for="rarity-select">Select Rarity:</label>
    <select id="rarity-select">
      <option value="">Choose rarity</option>
      <option value="Common">Common</option>
      <option value="Uncommon">Uncommon</option>
      <option value="Rare">Rare</option>
      <option value="Very Rare">Very Rare</option>
      <option value="Legendary">Legendary</option>
    </select>

    <br /><br />

    <label for="roll-input">Enter Roll (1-100):</label>
    <input type="number" id="roll-input" min="1" max="100" />

    <br /><br />

    <button id="get-loot-btn">Get Loot</button>

    <p id="loot-result" style="font-weight: bold; color: #f39c12; margin-top: 20px;"></p>
  </section>

      <script> // Random Loot Generator Script
  async function loadLootTable(tableName) {
    if (!tableName) return null;
    try {
      const response = await fetch(`/data/${tableName}_loot.json`);
      if (!response.ok) throw new Error("Failed to load loot table.");
      const data = await response.json();
      return data;
    } catch (error) {
      alert(error.message);
      return null;
    }
  }

  function filterByRarity(data, rarity) {
    return data.filter(entry => entry.rarity.toLowerCase() === rarity.toLowerCase());
  }

  function lookupLoot(data, roll) {
    for (const entry of data) {
      const [start, end] = entry.range;
      if (roll >= start && roll <= end) {
        return entry;
      }
    }
    return null;
  }

  document.getElementById("get-loot-btn").addEventListener("click", async () => {
    const tableName = document.getElementById("table-select").value;
    const rarity = document.getElementById("rarity-select").value;
    const roll = parseInt(document.getElementById("roll-input").value, 10);

    const resultEl = document.getElementById("loot-result");
    resultEl.textContent = "";

    if (!tableName) {
      alert("Please select a loot table.");
      return;
    }
    if (!rarity) {
      alert("Please select a rarity.");
      return;
    }
    if (isNaN(roll) || roll < 1 || roll > 100) {
      alert("Please enter a roll between 1 and 100.");
      return;
    }

    const tableData = await loadLootTable(tableName);
    if (!tableData) return;

    const filtered = filterByRarity(tableData, rarity);
    if (filtered.length === 0) {
      resultEl.textContent = `No items found for rarity '${rarity}'.`;
      return;
    }

    const loot = lookupLoot(filtered, roll);
    if (loot) {
      resultEl.textContent = `You found: ${loot.item} (Rarity: ${loot.rarity})`;
    } else {
      resultEl.textContent = "No item found for this roll and rarity.";
    }
  });
      </script> 
  </section>

  <section id="slur-generator-background"> <!-- Slur Generator Section -->
      <section id="slur-generator">
      <h2>Fantasy Slur Generator</h2>
      <label for="race-select">Choose a race:</label>
      <select id="race-select"></select>
      <button id="generate-slur">Generate Slur</button>
      <div id="slur-result"></div>
  </section>

    <script> // Slur Generator Script
let slurData = [];

// Load slurs.json
fetch('/data/slurs.json')
  .then(response => response.json())
  .then(data => {
    slurData = data;
    populateDropdown(data);
  })
  .catch(err => {
    console.error('Error loading slurs.json:', err);
  });

// Populate dropdown with group titles
function populateDropdown(data) {
  const select = document.getElementById('race-select');
  data.forEach(group => {
    const option = document.createElement('option');
    option.value = group.title;
    option.textContent = group.title;
    select.appendChild(option);
  });
}

// Generate slur for selected group
document.getElementById('generate-slur').addEventListener('click', () => {
  const selectedTitle = document.getElementById('race-select').value;
  if (!selectedTitle) {
    document.getElementById('slur-result').textContent = 'Please select a race/group.';
    return;
  }

  const group = slurData.find(g => g.title === selectedTitle);
  if (!group || group.list.length === 0) {
    document.getElementById('slur-result').textContent = 'No slurs found for this group.';
    return;
  }

  const slur = group.list[Math.floor(Math.random() * group.list.length)];
  document.getElementById('slur-result').textContent = `${group.title}: ${slur}`;
});

    </script>
  </section>

<section id="fortune-cookie-background"> <!-- Fortune Cookie Section -->
  <h2>Fortune Cookie Generator</h2>
  <p>Click the button to receive a random fortune cookie message.</p>
  <button id="generate-fortune">Generate Fortune</button>
  <div id="fortune-result" style="margin-top: 20px; font-weight: bold; color: #f39c12;"></div>

  <script> // Fortune Cookie Generator Script
  const fortunes = [
    "You will find great fortune in your couch cushions.",
    "A new adventure awaits you in the fridge.",
    "Your kindness will lead to free snacks.",
    "A thrilling time is in your near futureâ€”bring extra socks.",
    "You will soon discover a hidden talent for losing keys.",
    "An old friend will re-enter your life, probably asking for money.",
    "Your dreams are closer than you thinkâ€”check under the bed.",
    "A surprise gift will bring you joy, unless it's socks.",
    "You will overcome a great challenge with ease, unless it involves math.",
    "A journey of a thousand miles begins with a single nap.",
    "Your creativity will shine, especially when avoiding chores.",
    "A new opportunity will present itself soonâ€”donâ€™t trip over it.",
    "You will make a valuable connection that will benefit you, probably WiFi.",
    "Your hard work will soon pay off, in snacks.",
    "A moment of clarity will lead to a breakthrough, or at least a snack break.",
    "You will find peace in the chaos around you, especially with headphones.",
    "A small act of kindness will have a big impact, like sharing your fries.",
    "You will soon receive news that will make you smile, or giggle uncontrollably.",
    "Your intuition will guide you to success, or to the nearest pizza place.",
    "A new friendship will blossom in the near future, possibly with a houseplant.",
    "You will discover a new passion that brings you joy, like napping professionally.",
    "Your perseverance will lead to great achievements, or at least a clean room.",
    "A moment of laughter will brighten your day, especially if milk is involved.",
  ];

  document.getElementById("generate-fortune").addEventListener("click", () => {
    const randomIndex = Math.floor(Math.random() * fortunes.length);
    const fortune = fortunes[randomIndex];
    document.getElementById("fortune-result").textContent = fortune;
  });
  </script>

</section>

<a href="/" class="back-home-button">Back to Home</a>

</body> <!-- END OF BODY -->
</html>
